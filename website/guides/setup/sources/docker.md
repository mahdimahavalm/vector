---
id: "setup/sources/docker"
title: "Collect Docker logs & send them anywhere"
description: "A guide to quickly, and correctly, collect Docker logs and send them anywhere."
category: "setup"
tags: ["category: setup", "source: docker"]
---

> "I just wanna, like, collect my Docker logs and grep them -- why is all of
> this so complicated?"
>
> â€” developers

So you want to collect your Docker logs? Sounds simple! Sadly, it is not. Fear
not! This guide will get you up and running **in minutes**, all without
becoming a Docker logging expert.

import Alert from '@site/src/components/Alert';
import CodeExplanation from '@site/src/components/CodeExplanation';
import SVG from 'react-inlinesvg';
import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

<!--
     THIS FILE IS AUTOGENERATED!

     To make changes please edit the template located at:

     website/guides/setup/sources/docker.md.erb
-->

## What We'll Accomplish In This Guide

<ol className="list--checks list--lg list--semi-bold list--primary list--flush">
  <li>Collect Docker container logs.</li>
  <li>Filter which containers you collect them from.</li>
  <li>Automatically merge logs that Docker splits.</li>
  <li>Enrich your logs with useful Docker context.</li>
  <li>Send your logs to one or more destinations</li>
  <li className="list--li--arrow list--li--pink">All in just a few minutes. Let's get started!</li>
</ol>

## How This Guide Works

<SVG src="/img/tutorials/sources/docker.svg" />

---

The diagram above demonstrates our Docker logging strategy. It uses
[Vector][urls.vector_website] as a dedicated logging container. This is
superior because it is:

1. **Dependency free.** You do not need to install anything on the host.
2. **Easy to scale.** Simply deploy more logging containers as necessary.
3. **Fast & reliable.** Built in [Rust][urls.rust], Vector is [blistering fast and memory efficient][urls.vector_performance].
4. **Flexible.** Vector includes a robust set of [transforms][docs.transforms] to process your data.


## A Simple Step-By-Step Tutorial

<div className="steps steps--h3">

1. ### Configure Vector

   **Where would you like to send your data?**

   <Tabs
     block={true}
     select={true}
     defaultValue={"console"}
     values={[{"label":"AWS Cloudwatch Logs","value":"aws_cloudwatch_logs"},{"label":"AWS Kinesis Firehose","value":"aws_kinesis_firehose"},{"label":"AWS Kinesis Data Streams","value":"aws_kinesis_streams"},{"label":"AWS S3","value":"aws_s3"},{"label":"Blackhole","value":"blackhole"},{"label":"Clickhouse","value":"clickhouse"},{"label":"Console","value":"console"},{"label":"Elasticsearch","value":"elasticsearch"},{"label":"File","value":"file"},{"label":"GCP Cloud Storage (GCS)","value":"gcp_cloud_storage"},{"label":"GCP PubSub","value":"gcp_pubsub"},{"label":"GCP Stackdriver Logging","value":"gcp_stackdriver_logging"},{"label":"Honeycomb","value":"honeycomb"},{"label":"HTTP","value":"http"},{"label":"Humio Logs","value":"humio_logs"},{"label":"Kafka","value":"kafka"},{"label":"LogDNA","value":"logdna"},{"label":"loki","value":"loki"},{"label":"New Relic Logs","value":"new_relic_logs"},{"label":"Papertrail","value":"papertrail"},{"label":"Sematext Logs","value":"sematext_logs"},{"label":"Socket","value":"socket"},{"label":"Splunk HEC","value":"splunk_hec"},{"label":"Vector","value":"vector"}]}>
   <TabItem value="aws_cloudwatch_logs">

   ```bash
   echo '
   [sources.in]
     type = "docker" # required

   [sinks.out]
     # General
     type = "aws_cloudwatch_logs" # required
     inputs = ["in"] # required
     group_name = "{{ file }}" # required
     region = "us-east-1" # required, required when endpoint = ""
     stream_name = "{{ host }}" # required

     # Encoding
     encoding.codec = "json" # required
   ' > vector.toml
   ```

   <CodeExplanation>

   * The `vector.toml` file is the Vector configuration file that we'll pass in
    the next step.
   * The [`docker` source][docs.sources.docker] tells Vector to collect Docker
    logs.
   * The the [`console` sink][docs.sinks.console] simply prints the collected
    logs so that we can manually verify everything is working.

   </CodeExplanation>

   </TabItem>
   <TabItem value="aws_kinesis_firehose">

   ```bash
   echo '
   [sources.in]
     type = "docker" # required

   [sinks.out]
     # General
     type = "aws_kinesis_firehose" # required
     inputs = ["in"] # required
     region = "us-east-1" # required, required when endpoint = ""
     stream_name = "my-stream" # required

     # Encoding
     encoding.codec = "json" # required
   ' > vector.toml
   ```

   <CodeExplanation>

   * The `vector.toml` file is the Vector configuration file that we'll pass in
    the next step.
   * The [`docker` source][docs.sources.docker] tells Vector to collect Docker
    logs.
   * The the [`console` sink][docs.sinks.console] simply prints the collected
    logs so that we can manually verify everything is working.

   </CodeExplanation>

   </TabItem>
   <TabItem value="aws_kinesis_streams">

   ```bash
   echo '
   [sources.in]
     type = "docker" # required

   [sinks.out]
     # General
     type = "aws_kinesis_streams" # required
     inputs = ["in"] # required
     region = "us-east-1" # required, required when endpoint = ""
     stream_name = "my-stream" # required

     # Encoding
     encoding.codec = "json" # required
   ' > vector.toml
   ```

   <CodeExplanation>

   * The `vector.toml` file is the Vector configuration file that we'll pass in
    the next step.
   * The [`docker` source][docs.sources.docker] tells Vector to collect Docker
    logs.
   * The the [`console` sink][docs.sinks.console] simply prints the collected
    logs so that we can manually verify everything is working.

   </CodeExplanation>

   </TabItem>
   <TabItem value="aws_s3">

   ```bash
   echo '
   [sources.in]
     type = "docker" # required

   [sinks.out]
     # General
     type = "aws_s3" # required
     inputs = ["in"] # required
     bucket = "my-bucket" # required
     compression = "gzip" # required
     region = "us-east-1" # required, required when endpoint = ""

     # Encoding
     encoding.codec = "ndjson" # required
   ' > vector.toml
   ```

   <CodeExplanation>

   * The `vector.toml` file is the Vector configuration file that we'll pass in
    the next step.
   * The [`docker` source][docs.sources.docker] tells Vector to collect Docker
    logs.
   * The the [`console` sink][docs.sinks.console] simply prints the collected
    logs so that we can manually verify everything is working.

   </CodeExplanation>

   </TabItem>
   <TabItem value="blackhole">

   ```bash
   echo '
   [sources.in]
     type = "docker" # required

   [sinks.out]
     type = "blackhole" # required
     inputs = ["in"] # required
     print_amount = 1000 # required
   ' > vector.toml
   ```

   <CodeExplanation>

   * The `vector.toml` file is the Vector configuration file that we'll pass in
    the next step.
   * The [`docker` source][docs.sources.docker] tells Vector to collect Docker
    logs.
   * The the [`console` sink][docs.sinks.console] simply prints the collected
    logs so that we can manually verify everything is working.

   </CodeExplanation>

   </TabItem>
   <TabItem value="clickhouse">

   ```bash
   echo '
   [sources.in]
     type = "docker" # required

   [sinks.out]
     type = "clickhouse" # required
     inputs = ["in"] # required
     host = "http://localhost:8123" # required
     table = "mytable" # required
   ' > vector.toml
   ```

   <CodeExplanation>

   * The `vector.toml` file is the Vector configuration file that we'll pass in
    the next step.
   * The [`docker` source][docs.sources.docker] tells Vector to collect Docker
    logs.
   * The the [`console` sink][docs.sinks.console] simply prints the collected
    logs so that we can manually verify everything is working.

   </CodeExplanation>

   </TabItem>
   <TabItem value="console">

   ```bash
   echo '
   [sources.in]
     type = "docker" # required

   [sinks.out]
     # General
     type = "console" # required
     inputs = ["in"] # required

     # Encoding
     encoding.codec = "json" # required
   ' > vector.toml
   ```

   <CodeExplanation>

   * The `vector.toml` file is the Vector configuration file that we'll pass in
    the next step.
   * The [`docker` source][docs.sources.docker] tells Vector to collect Docker
    logs.
   * The the [`console` sink][docs.sinks.console] simply prints the collected
    logs so that we can manually verify everything is working.

   </CodeExplanation>

   </TabItem>
   <TabItem value="elasticsearch">

   ```bash
   echo '
   [sources.in]
     type = "docker" # required

   [sinks.out]
     type = "elasticsearch" # required
     inputs = ["in"] # required
   ' > vector.toml
   ```

   <CodeExplanation>

   * The `vector.toml` file is the Vector configuration file that we'll pass in
    the next step.
   * The [`docker` source][docs.sources.docker] tells Vector to collect Docker
    logs.
   * The the [`console` sink][docs.sinks.console] simply prints the collected
    logs so that we can manually verify everything is working.

   </CodeExplanation>

   </TabItem>
   <TabItem value="file">

   ```bash
   echo '
   [sources.in]
     type = "docker" # required

   [sinks.out]
     # General
     type = "file" # required
     inputs = ["in"] # required
     path = "vector-%Y-%m-%d.log" # required

     # Encoding
     encoding.codec = "ndjson" # required
   ' > vector.toml
   ```

   <CodeExplanation>

   * The `vector.toml` file is the Vector configuration file that we'll pass in
    the next step.
   * The [`docker` source][docs.sources.docker] tells Vector to collect Docker
    logs.
   * The the [`console` sink][docs.sinks.console] simply prints the collected
    logs so that we can manually verify everything is working.

   </CodeExplanation>

   </TabItem>
   <TabItem value="gcp_cloud_storage">

   ```bash
   echo '
   [sources.in]
     type = "docker" # required

   [sinks.out]
     # General
     type = "gcp_cloud_storage" # required
     inputs = ["in"] # required
     bucket = "my-bucket" # required
     compression = "gzip" # required
     credentials_path = "/path/to/credentials.json" # required

     # Encoding
     encoding.codec = "ndjson" # required
   ' > vector.toml
   ```

   <CodeExplanation>

   * The `vector.toml` file is the Vector configuration file that we'll pass in
    the next step.
   * The [`docker` source][docs.sources.docker] tells Vector to collect Docker
    logs.
   * The the [`console` sink][docs.sinks.console] simply prints the collected
    logs so that we can manually verify everything is working.

   </CodeExplanation>

   </TabItem>
   <TabItem value="gcp_pubsub">

   ```bash
   echo '
   [sources.in]
     type = "docker" # required

   [sinks.out]
     type = "gcp_pubsub" # required
     inputs = ["in"] # required
     project = "vector-123456" # required
     topic = "this-is-a-topic" # required
   ' > vector.toml
   ```

   <CodeExplanation>

   * The `vector.toml` file is the Vector configuration file that we'll pass in
    the next step.
   * The [`docker` source][docs.sources.docker] tells Vector to collect Docker
    logs.
   * The the [`console` sink][docs.sinks.console] simply prints the collected
    logs so that we can manually verify everything is working.

   </CodeExplanation>

   </TabItem>
   <TabItem value="gcp_stackdriver_logging">

   ```bash
   echo '
   [sources.in]
     type = "docker" # required

   [sinks.out]
     type = "gcp_stackdriver_logging" # required
     inputs = ["in"] # required
     credentials_path = "/path/to/credentials.json" # required
     log_id = "vector-logs" # required
     project_id = "vector-123456" # required
   ' > vector.toml
   ```

   <CodeExplanation>

   * The `vector.toml` file is the Vector configuration file that we'll pass in
    the next step.
   * The [`docker` source][docs.sources.docker] tells Vector to collect Docker
    logs.
   * The the [`console` sink][docs.sinks.console] simply prints the collected
    logs so that we can manually verify everything is working.

   </CodeExplanation>

   </TabItem>
   <TabItem value="honeycomb">

   ```bash
   echo '
   [sources.in]
     type = "docker" # required

   [sinks.out]
     type = "honeycomb" # required
     inputs = ["in"] # required
     api_key = "${MY_API_KEY}" # required
     dataset = "my-honeycomb-dataset" # required
   ' > vector.toml
   ```

   <CodeExplanation>

   * The `vector.toml` file is the Vector configuration file that we'll pass in
    the next step.
   * The [`docker` source][docs.sources.docker] tells Vector to collect Docker
    logs.
   * The the [`console` sink][docs.sinks.console] simply prints the collected
    logs so that we can manually verify everything is working.

   </CodeExplanation>

   </TabItem>
   <TabItem value="http">

   ```bash
   echo '
   [sources.in]
     type = "docker" # required

   [sinks.out]
     # General
     type = "http" # required
     inputs = ["in"] # required
     uri = "https://10.22.212.22:9000/endpoint" # required

     # Encoding
     encoding.codec = "json" # required
   ' > vector.toml
   ```

   <CodeExplanation>

   * The `vector.toml` file is the Vector configuration file that we'll pass in
    the next step.
   * The [`docker` source][docs.sources.docker] tells Vector to collect Docker
    logs.
   * The the [`console` sink][docs.sinks.console] simply prints the collected
    logs so that we can manually verify everything is working.

   </CodeExplanation>

   </TabItem>
   <TabItem value="humio_logs">

   ```bash
   echo '
   [sources.in]
     type = "docker" # required

   [sinks.out]
     type = "humio_logs" # required
     inputs = ["in"] # required
     token = "${TOKEN_ENV_VAR}" # required
   ' > vector.toml
   ```

   <CodeExplanation>

   * The `vector.toml` file is the Vector configuration file that we'll pass in
    the next step.
   * The [`docker` source][docs.sources.docker] tells Vector to collect Docker
    logs.
   * The the [`console` sink][docs.sinks.console] simply prints the collected
    logs so that we can manually verify everything is working.

   </CodeExplanation>

   </TabItem>
   <TabItem value="kafka">

   ```bash
   echo '
   [sources.in]
     type = "docker" # required

   [sinks.out]
     # General
     type = "kafka" # required
     inputs = ["in"] # required
     bootstrap_servers = "10.14.22.123:9092,10.14.23.332:9092" # required
     key_field = "user_id" # required
     topic = "topic-1234" # required

     # Encoding
     encoding.codec = "json" # required
   ' > vector.toml
   ```

   <CodeExplanation>

   * The `vector.toml` file is the Vector configuration file that we'll pass in
    the next step.
   * The [`docker` source][docs.sources.docker] tells Vector to collect Docker
    logs.
   * The the [`console` sink][docs.sinks.console] simply prints the collected
    logs so that we can manually verify everything is working.

   </CodeExplanation>

   </TabItem>
   <TabItem value="logdna">

   ```bash
   echo '
   [sources.in]
     type = "docker" # required

   [sinks.out]
     type = "logdna" # required
     inputs = ["in"] # required
     api_key = "${LOGDNA_API_KEY_ENV_VAR}" # required
     hostname = "my-local-machine" # required
   ' > vector.toml
   ```

   <CodeExplanation>

   * The `vector.toml` file is the Vector configuration file that we'll pass in
    the next step.
   * The [`docker` source][docs.sources.docker] tells Vector to collect Docker
    logs.
   * The the [`console` sink][docs.sinks.console] simply prints the collected
    logs so that we can manually verify everything is working.

   </CodeExplanation>

   </TabItem>
   <TabItem value="loki">

   ```bash
   echo '
   [sources.in]
     type = "docker" # required

   [sinks.out]
     # General
     type = "loki" # required
     inputs = ["in"] # required
     endpoint = "http://localhost:3100" # required

     # Labels
     labels.key = "value" # example
     labels.key = "{{ event_field }}" # example
   ' > vector.toml
   ```

   <CodeExplanation>

   * The `vector.toml` file is the Vector configuration file that we'll pass in
    the next step.
   * The [`docker` source][docs.sources.docker] tells Vector to collect Docker
    logs.
   * The the [`console` sink][docs.sinks.console] simply prints the collected
    logs so that we can manually verify everything is working.

   </CodeExplanation>

   </TabItem>
   <TabItem value="new_relic_logs">

   ```bash
   echo '
   [sources.in]
     type = "docker" # required

   [sinks.out]
     type = "new_relic_logs" # required
     inputs = ["in"] # required
   ' > vector.toml
   ```

   <CodeExplanation>

   * The `vector.toml` file is the Vector configuration file that we'll pass in
    the next step.
   * The [`docker` source][docs.sources.docker] tells Vector to collect Docker
    logs.
   * The the [`console` sink][docs.sinks.console] simply prints the collected
    logs so that we can manually verify everything is working.

   </CodeExplanation>

   </TabItem>
   <TabItem value="papertrail">

   ```bash
   echo '
   [sources.in]
     type = "docker" # required

   [sinks.out]
     # General
     type = "papertrail" # required
     inputs = ["in"] # required
     endpoint = "logs.papertrailapp.com:12345" # required

     # Encoding
     encoding.codec = "json" # required
   ' > vector.toml
   ```

   <CodeExplanation>

   * The `vector.toml` file is the Vector configuration file that we'll pass in
    the next step.
   * The [`docker` source][docs.sources.docker] tells Vector to collect Docker
    logs.
   * The the [`console` sink][docs.sinks.console] simply prints the collected
    logs so that we can manually verify everything is working.

   </CodeExplanation>

   </TabItem>
   <TabItem value="sematext_logs">

   ```bash
   echo '
   [sources.in]
     type = "docker" # required

   [sinks.out]
     type = "sematext_logs" # required
     inputs = ["in"] # required
     token = "${SEMATEXT_TOKEN_ENV_VAR}" # required
   ' > vector.toml
   ```

   <CodeExplanation>

   * The `vector.toml` file is the Vector configuration file that we'll pass in
    the next step.
   * The [`docker` source][docs.sources.docker] tells Vector to collect Docker
    logs.
   * The the [`console` sink][docs.sinks.console] simply prints the collected
    logs so that we can manually verify everything is working.

   </CodeExplanation>

   </TabItem>
   <TabItem value="socket">

   ```bash
   echo '
   [sources.in]
     type = "docker" # required

   [sinks.out]
     # General
     type = "socket" # required
     inputs = ["in"] # required
     address = "92.12.333.224:5000" # required, required when mode = "tcp"
     mode = "tcp" # required
     path = "/path/to/socket" # required, required when mode = "unix"

     # Encoding
     encoding.codec = "json" # required
   ' > vector.toml
   ```

   <CodeExplanation>

   * The `vector.toml` file is the Vector configuration file that we'll pass in
    the next step.
   * The [`docker` source][docs.sources.docker] tells Vector to collect Docker
    logs.
   * The the [`console` sink][docs.sinks.console] simply prints the collected
    logs so that we can manually verify everything is working.

   </CodeExplanation>

   </TabItem>
   <TabItem value="splunk_hec">

   ```bash
   echo '
   [sources.in]
     type = "docker" # required

   [sinks.out]
     # General
     type = "splunk_hec" # required
     inputs = ["in"] # required
     host = "http://my-splunk-host.com" # required
     token = "${TOKEN_ENV_VAR}" # required

     # Encoding
     encoding.codec = "json" # required
   ' > vector.toml
   ```

   <CodeExplanation>

   * The `vector.toml` file is the Vector configuration file that we'll pass in
    the next step.
   * The [`docker` source][docs.sources.docker] tells Vector to collect Docker
    logs.
   * The the [`console` sink][docs.sinks.console] simply prints the collected
    logs so that we can manually verify everything is working.

   </CodeExplanation>

   </TabItem>
   <TabItem value="vector">

   ```bash
   echo '
   [sources.in]
     type = "docker" # required

   [sinks.out]
     type = "vector" # required
     inputs = ["in"] # required
     address = "92.12.333.224:5000" # required
   ' > vector.toml
   ```

   <CodeExplanation>

   * The `vector.toml` file is the Vector configuration file that we'll pass in
    the next step.
   * The [`docker` source][docs.sources.docker] tells Vector to collect Docker
    logs.
   * The the [`console` sink][docs.sinks.console] simply prints the collected
    logs so that we can manually verify everything is working.

   </CodeExplanation>

   </TabItem>
   </Tabs>

2. ### Start Vector as a container

   ```bash
   docker run \
   -v /var/run/docker.sock:/var/run/docker.sock \
   -v $PWD/vector.toml:/etc/vector/vector.toml:ro \
   timberio/vector:latest-alpine
   ```

   <CodeExplanation>

   * The first `-v` flag ensures that Vector has access to the Docker socket.
     This is how Vector receives Docker logs.
   * The second `-v` flag passes the previously created Vector configuration
     file into the container.

   </CodeExplanation>

   That's it! Simple and to the point. Hit `ctrl+c` to exit.

</div>

## Next Steps

1. Explore Vector's transforms for ways to further process your data.
2. Explore Vector's [guides][guides.index] and [docs.index] to unlock the full
   potential of Vector.


[docs.sinks.console]: /docs/reference/sinks/console/
[docs.sources.docker]: /docs/reference/sources/docker/
[docs.transforms]: /docs/reference/transforms/
[guides.index]: /guides
[urls.rust]: https://www.rust-lang.org/
[urls.vector_performance]: https://vector.dev/#performance
[urls.vector_website]: https://vector.dev
